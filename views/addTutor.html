<!DOCTYPE html>
<html>
  <head>
  </head>

  <body>
    <h1>Tutoring Università</h1>
    <h2>
      Registra un nuovo Tutor!
    </h2>
    
    <form action="" id="addTutor">
      <div>
        <label for="name">Nome</label>
        <input type="text" id="name" name="name" >
      </div>
      <div>
        <label for="surname">Cognome</label>
        <input type="text" id="surname" name="name" >
      </div>
      <div>
        <label for="email">Email</label>
        <input type="email" id="email" name="email" >
      </div>
      <div>
        <label for="universita">Università</label>
        <input list="nome-università" name="universita" id="universita">
        <!input list="nome-universita" id="universita" name="universita" autocomplete= "on">
      </div>
      <div>
        <label for="corso">Corso di Studi</label>
        <input type="text" id="corso" name="corso" >
      </div>
      <br>
      <button type="button" id="newValue" onclick= "addTutor()" >Aggiungi</button>
    </form>
    <hr>
    <div>
        <p> Torna alla Home | <a href="/home">Home</a></p>
      </div>
    
  </body>

    <script>
    async function addTutor(){
      
      //definisco i dati del nuovo tutor aggiungendo alcuni campi di default
      const newTutor = ({
        id: Date.now().toString(),
        name : document.getElementById("name").value,
        surname : document.getElementById("surname").value,
        email : document.getElementById("email").value,
        universita : document.getElementById("universita").value,
        corso : document.getElementById("corso").value,
        esami:[] 
      })
      //opzioni per la fetch
      const options = {
        method: 'POST',
        headers: {
        'Content-Type': 'application/json',
        },
        body: JSON.stringify(newTutor),
      };
      //eseguo la fetch
      fetch('https://progetto-piattaforme-territorio.glitch.me/home/addTutor', options)
      .then((response) => {
        if (response.ok) {
          alert("Nuovo tutor aggiunto!");
          return response.json();
        }
        alert('ERROR!Something went wrong!');
      })
      .catch(e => {
          console.log(e);
      });
      //pulisce la form
      document.getElementById("addTutor").reset();
    }
  </script>
  
<datalist id="nome-università">
  <!Università delle Marche>
  <option value="Università Politecnica delle Marche"></option>
  <option value="Università degli Studi di Camerino"></option>
  <option value="Università degli Studi di Macerata"></option>
  <option value="Università degli Studi di Urbino "></option>
  <option value="Università degli Studi di Ferrara "></option>
  <!Università dell'Abruzzo>
  <option value="Università degli Studi Gabriele d'Annunzio"></option>
  <option value="Università degli Studi dell'Aquila"></option>
  <option value="Università degli Studi di Teramo"></option>
  <! Università della Basilicata>
  <option value="Università degli Studi della Basilicata"></option>
  <! Università della Calabria>
  <option value="Università degli Studi Magna Græcia di Catanzaro"></option>
  <option value="Università della Calabria"></option>
  <option value="Università degli Studi Mediterranea di Reggio Calabria"></option>
</datalist>
  
</html>